!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Decimal=n()}(this,(function(){"use strict";for(var t=9e15,n=[],r=-323;r<=308;r++)n.push(Number("1e"+r));function e(t){return n[t+323]}function i(t,n,r){isFinite(n)&&isFinite(r)?(t.__set__(n,r),t.normalize()):o(t,ut.NaN)}function o(t,n){t.__set__(n.m,n.e)}function u(t,n){if(isFinite(n))if(0!==n){var r=Math.floor(Math.log10(Math.abs(n)));i(t,-324===r?10*n/1e-323:n/e(r),r)}else t.__set__(0,0);else t.__set__(n,0)}function a(t,n){if(-1===n.indexOf("e"))if("NaN"!==n){var r=parseFloat(n);if(isNaN(r))throw Error("[DecimalError] Invalid argument: "+n);u(t,r)}else o(t,ut.NaN);else{var e=n.split("e");i(t,parseFloat(e[0]),parseFloat(e[1]))}}function s(t,n){void 0===n?t.__set__(0,0):n instanceof ut?o(t,n):"number"==typeof n?u(t,n):"string"==typeof n&&a(t,n)}function c(t,n){var r=new ut;return r.__set__(t,n),r}function f(t,n){var r=new ut;return i(r,t,n),r}function p(t){var n=new ut;return o(n,t),n}function h(t){var n=new ut;return u(n,t),n}function m(t){var n=new ut;return a(n,t),n}function l(t){var n=new ut;return s(n,t),n}function y(t){return t instanceof ut?t:new ut(t)}function g(t){return 0===t.m}function b(t){return Number.isFinite(t.m)}function d(t){return Number.isNaN(t.m)}function N(t){var n=new ut(t);return n.m=-n.m,n}function M(t){return c(-t.m,t.e)}function _(t){var n=new ut(t);return n.__set__(1/n.m,-n.e),n}function v(t){return f(1/t.m,-t.e)}function q(t){var n=new ut(t);return n.m=Math.abs(n.m),n}function E(t){return"number"==typeof t?Math.sign(t):w(y(t))}function w(t){return Math.sign(t.m)}function x(t){return b(t)?t.e<-1?ut.ZERO:t.e<17?h(Math.round(t.toNumber())):t:t}function I(t){return b(t)?t.e<-1?Math.sign(t.m)>=0?ut.ZERO:ut.MINUS_ONE:t.e<17?h(Math.floor(t.toNumber())):t:t}function F(t){return b(t)?t.e<-1?Math.sign(t.m)>0?ut.ONE:ut.ZERO:t.e<17?h(Math.ceil(t.toNumber())):t:t}function O(t){return b(t)?t.e<0?ut.ZERO:t.e<17?h(Math.trunc(t.toNumber())):t:t}function P(t,n){return S(y(t),n)}function S(t,n){if(!b(t))return t;var r=y(n);return b(r)?T(t,r):r}function T(t,n){return g(t)?n:g(n)?t:(t.e>=n.e?(r=t,i=n):(r=n,i=t),r.e-i.e>17?r:f(Math.round(1e14*r.m+1e14*i.m*e(i.e-r.e)),r.e-14));var r,i}function A(t,n){return j(y(t),n)}function j(t,n){if(!b(t))return t;var r=y(n);return b(r)?function(t,n){return T(t,M(n))}(t,r):r}function L(t,n){return V(y(t),n)}function V(t,n){if(!b(t))return t;if("number"==typeof n)return n<1e307&&n>-1e307?f(t.m*n,t.e):f(1e-307*t.m*n,t.e+307);var r="string"==typeof n?m(n):n;return b(r)?U(t,r):r}function U(t,n){return f(t.m*n.m,t.e+n.e)}function R(t,n){return D(y(t),n)}function D(t,n){if(!b(t))return t;var r=y(n);return b(r)?function(t,n){return U(t,v(n))}(t,r):r}function Y(t,n){return Z(y(t),n)}function Z(t,n){var r=y(n);return d(t)?d(r)?0:-1:d(r)?1:G(t,r)}function G(t,n){if(0===t.m){if(0===n.m)return 0;if(n.m<0)return 1;if(n.m>0)return-1}if(0===n.m){if(t.m<0)return-1;if(t.m>0)return 1}if(t.m>0)return n.m<0||t.e>n.e?1:t.e<n.e?-1:t.m>n.m?1:t.m<n.m?-1:0;if(t.m<0)return n.m>0||t.e>n.e?-1:t.e<n.e||t.m>n.m?1:t.m<n.m?-1:0;throw Error("Unreachable code")}function B(t,n){return z(y(t),n)}function z(t,n){if(d(t))return!1;var r=y(n);return!d(r)&&X(t,r)}function X(t,n){return t.e===n.e&&t.m===n.m}function W(t,n){return J(y(t),n)}function J(t,n){if(d(t))return!0;var r=y(n);return!!d(r)||function(t,n){return!X(t,n)}(t,r)}function k(t,n){if(d(t))return!1;var r=y(n);return!!d(r)||C(t,r)}function C(t,n){return 0===t.m?n.m>0:0===n.m?t.m<=0:t.e===n.e?t.m<n.m:t.m>0?n.m>0&&t.e<n.e:n.m>0||t.e>n.e}function H(t,n){if(d(t))return!1;var r=y(n);return!!d(r)||K(t,r)}function K(t,n){return 0===t.m?n.m<0:0===n.m?t.m>0:t.e===n.e?t.m>n.m:t.m>0?n.m<0||t.e>n.e:n.m<0&&t.e<n.e}function Q(t,n){if(d(t))return!1;var r=y(n);return!!d(r)||function(t,n){return!K(t,n)}(t,r)}function $(t,n){if(d(t))return!1;var r=y(n);return!!d(r)||function(t,n){return!C(t,n)}(t,r)}var tt=[];function nt(t){if(t<=0)return"";var n=tt[t];if(void 0!==n)return n;var r=function(t){for(var n="";n.length<t;)n+="0";return n}(t);return tt[t]=r,r}function rt(t){return t>0?"."+nt(t):""}var et=y;function it(t,n,r,e){var i=n.mul(r.pow(e));return ut.floor(t.div(i).mul(r.sub(1)).add(1).log10()/r.log10())}function ot(t,n,r,e){return n.mul(r.pow(e)).mul(ut.sub(1,r.pow(t))).div(ut.sub(1,r))}var ut=function(){function n(t){this.mantissa=NaN,this.exponent=NaN,s(this,t)}return Object.defineProperty(n.prototype,"m",{get:function(){return this.mantissa},set:function(t){this.mantissa=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"e",{get:function(){return this.exponent},set:function(t){this.exponent=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"s",{get:function(){return this.sign()},set:function(t){if(0===t)return this.e=0,void(this.m=0);this.sgn()!==t&&(this.m=-this.m)},enumerable:!1,configurable:!0}),n.fromMantissaExponent=function(t,n){return f(t,n)},n.fromMantissaExponent_noNormalize=function(t,n){return c(t,n)},n.fromDecimal=function(t){return p(t)},n.fromNumber=function(t){return h(t)},n.fromString=function(t){return m(t)},n.fromValue=function(t){return l(t)},n.fromValue_noAlloc=function(t){return y(t)},n.abs=function(t){return q(t)},n.neg=function(t){return N(t)},n.negate=function(t){return N(t)},n.negated=function(t){return N(t)},n.sign=function(t){return E(t)},n.sgn=function(t){return E(t)},n.round=function(t){return function(t){return"number"==typeof t?h(Math.round(t)):x(y(t))}(t)},n.floor=function(t){return function(t){return"number"==typeof t?h(Math.floor(t)):I(y(t))}(t)},n.ceil=function(t){return function(t){return"number"==typeof t?h(Math.ceil(t)):F(y(t))}(t)},n.trunc=function(t){return function(t){return"number"==typeof t?h(Math.trunc(t)):O(y(t))}(t)},n.add=function(t,n){return P(t,n)},n.plus=function(t,n){return P(t,n)},n.sub=function(t,n){return A(t,n)},n.subtract=function(t,n){return A(t,n)},n.minus=function(t,n){return A(t,n)},n.mul=function(t,n){return L(t,n)},n.multiply=function(t,n){return L(t,n)},n.times=function(t,n){return L(t,n)},n.div=function(t,n){return R(t,n)},n.divide=function(t,n){return R(t,n)},n.recip=function(t){return _(t)},n.reciprocal=function(t){return _(t)},n.reciprocate=function(t){return _(t)},n.cmp=function(t,n){return Y(t,n)},n.compare=function(t,n){return Y(t,n)},n.eq=function(t,n){return B(t,n)},n.equals=function(t,n){return B(t,n)},n.neq=function(t,n){return W(t,n)},n.notEquals=function(t,n){return W(t,n)},n.lt=function(t,n){return r=n,k(y(t),r);var r},n.lte=function(t,n){return r=n,Q(y(t),r);var r},n.gt=function(t,n){return r=n,H(y(t),r);var r},n.gte=function(t,n){return r=n,$(y(t),r);var r},n.max=function(t,n){return et(t).max(n)},n.min=function(t,n){return et(t).min(n)},n.clamp=function(t,n,r){return et(t).clamp(n,r)},n.clampMin=function(t,n){return et(t).clampMin(n)},n.clampMax=function(t,n){return et(t).clampMax(n)},n.cmp_tolerance=function(t,n,r){return et(t).cmp_tolerance(n,r)},n.compare_tolerance=function(t,n,r){return et(t).cmp_tolerance(n,r)},n.eq_tolerance=function(t,n,r){return et(t).eq_tolerance(n,r)},n.equals_tolerance=function(t,n,r){return et(t).eq_tolerance(n,r)},n.neq_tolerance=function(t,n,r){return et(t).neq_tolerance(n,r)},n.notEquals_tolerance=function(t,n,r){return et(t).notEquals_tolerance(n,r)},n.lt_tolerance=function(t,n,r){return et(t).lt_tolerance(n,r)},n.lte_tolerance=function(t,n,r){return et(t).lte_tolerance(n,r)},n.gt_tolerance=function(t,n,r){return et(t).gt_tolerance(n,r)},n.gte_tolerance=function(t,n,r){return et(t).gte_tolerance(n,r)},n.log10=function(t){return et(t).log10()},n.absLog10=function(t){return et(t).absLog10()},n.pLog10=function(t){return et(t).pLog10()},n.log=function(t,n){return et(t).log(n)},n.log2=function(t){return et(t).log2()},n.ln=function(t){return et(t).ln()},n.logarithm=function(t,n){return et(t).logarithm(n)},n.pow10=function(t){return Number.isInteger(t)?c(1,t):f(Math.pow(10,t%1),Math.trunc(t))},n.pow=function(t,n){return"number"==typeof t&&10===t&&"number"==typeof n&&Number.isInteger(n)?c(1,n):et(t).pow(n)},n.exp=function(t){return et(t).exp()},n.sqr=function(t){return et(t).sqr()},n.sqrt=function(t){return et(t).sqrt()},n.cube=function(t){return et(t).cube()},n.cbrt=function(t){return et(t).cbrt()},n.dp=function(t){return et(t).dp()},n.decimalPlaces=function(t){return et(t).dp()},n.affordGeometricSeries=function(t,n,r,e){return it(et(t),et(n),et(r),e)},n.sumGeometricSeries=function(t,n,r,e){return ot(t,et(n),et(r),e)},n.affordArithmeticSeries=function(t,n,r,e){return function(t,n,r,e){var i=n.add(e.mul(r)).sub(r.div(2)),o=i.pow(2);return i.neg().add(o.add(r.mul(t).mul(2)).sqrt()).div(r).floor()}(et(t),et(n),et(r),et(e))},n.sumArithmeticSeries=function(t,n,r,e){return function(t,n,r,e){var i=n.add(e.mul(r));return t.div(2).mul(i.mul(2).plus(t.sub(1).mul(r)))}(et(t),et(n),et(r),et(e))},n.efficiencyOfPurchase=function(t,n,r){return function(t,n,r){return t.div(n).add(t.div(r))}(et(t),et(n),et(r))},n.randomDecimalForTesting=function(t){if(20*Math.random()<1)return c(0,0);var n=10*Math.random();return 10*Math.random()<1&&(n=Math.round(n)),f(n*=Math.sign(2*Math.random()-1),Math.floor(Math.random()*t*2)-t)},n.prototype.__set__=function(t,n){this.m=t,this.e=n},n.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(0===this.m)return this.m=0,this.e=0,this;var t=Math.floor(Math.log10(Math.abs(this.m)));return this.m=-324===t?10*this.m/1e-323:this.m/e(t),this.e+=t,this},n.prototype.toNumber=function(){if(!this.isFinite())return this.mantissa;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(-324===this.e)return this.m>0?5e-324:-5e-324;var t=this.m*e(this.e);if(!isFinite(t)||this.e<0)return t;var n=Math.round(t);return Math.abs(n-t)<1e-10?n:t},n.prototype.mantissaWithDecimalPlaces=function(t){if(!this.isFinite())return this.mantissa;if(0===this.m)return 0;var n=t+1,r=Math.ceil(Math.log10(Math.abs(this.m))),e=Math.round(this.m*Math.pow(10,n-r))*Math.pow(10,r-n);return parseFloat(e.toFixed(Math.max(n-r,0)))},n.prototype.toString=function(){return this.isFinite()?this.e<=-t||0===this.m?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e:this.mantissa.toString()},n.prototype.toExponential=function(n){if(!this.isFinite())return this.mantissa.toString();if(this.e<=-t||0===this.m)return"0"+rt(n)+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(n);isFinite(n)||(n=17);var r=n+1,e=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,r-e))*Math.pow(10,e-r)).toFixed(Math.max(r-e,0))+"e"+(this.e>=0?"+":"")+this.e},n.prototype.toFixed=function(n){if(!this.isFinite())return this.mantissa.toString();if(this.e<=-t||0===this.m)return"0"+rt(n);if(this.e>=17){var r=this.m.toString().replace(".","");return r+nt(this.e-r.length+1)+rt(n)}return this.toNumber().toFixed(n)},n.prototype.toPrecision=function(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.e-1):this.toExponential(t-1)},n.prototype.valueOf=function(){return this.toString()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toStringWithDecimalPlaces=function(t){return this.toExponential(t)},n.prototype.abs=function(){return t=this,c(Math.abs(t.m),t.e);var t},n.prototype.neg=function(){return M(this)},n.prototype.negate=function(){return M(this)},n.prototype.negated=function(){return M(this)},n.prototype.sign=function(){return w(this)},n.prototype.sgn=function(){return w(this)},n.prototype.round=function(){return x(this)},n.prototype.floor=function(){return I(this)},n.prototype.ceil=function(){return F(this)},n.prototype.trunc=function(){return O(this)},n.prototype.add=function(t){return S(this,t)},n.prototype.plus=function(t){return S(this,t)},n.prototype.sub=function(t){return j(this,t)},n.prototype.subtract=function(t){return j(this,t)},n.prototype.minus=function(t){return j(this,t)},n.prototype.mul=function(t){return V(this,t)},n.prototype.multiply=function(t){return V(this,t)},n.prototype.times=function(t){return V(this,t)},n.prototype.div=function(t){return D(this,t)},n.prototype.divide=function(t){return D(this,t)},n.prototype.divideBy=function(t){return D(this,t)},n.prototype.dividedBy=function(t){return D(this,t)},n.prototype.recip=function(){return v(this)},n.prototype.reciprocal=function(){return v(this)},n.prototype.reciprocate=function(){return v(this)},n.prototype.cmp=function(t){return Z(this,t)},n.prototype.compare=function(t){return Z(this,t)},n.prototype.eq=function(t){return z(this,t)},n.prototype.equals=function(t){return z(this,t)},n.prototype.neq=function(t){return J(this,t)},n.prototype.notEquals=function(t){return J(this,t)},n.prototype.lt=function(t){return k(this,t)},n.prototype.lte=function(t){return Q(this,t)},n.prototype.gt=function(t){return H(this,t)},n.prototype.gte=function(t){return $(this,t)},n.prototype.max=function(t){var n=et(t);return this.lt(n)?n:this},n.prototype.min=function(t){var n=et(t);return this.gt(n)?n:this},n.prototype.clamp=function(t,n){return this.max(t).min(n)},n.prototype.clampMin=function(t){return this.max(t)},n.prototype.clampMax=function(t){return this.min(t)},n.prototype.cmp_tolerance=function(t,n){var r=et(t);return this.eq_tolerance(r,n)?0:this.cmp(r)},n.prototype.compare_tolerance=function(t,n){return this.cmp_tolerance(t,n)},n.prototype.eq_tolerance=function(t,r){var e=et(t);return n.lte(this.sub(e).abs(),n.max(this.abs(),e.abs()).mul(r))},n.prototype.equals_tolerance=function(t,n){return this.eq_tolerance(t,n)},n.prototype.neq_tolerance=function(t,n){return!this.eq_tolerance(t,n)},n.prototype.notEquals_tolerance=function(t,n){return this.neq_tolerance(t,n)},n.prototype.lt_tolerance=function(t,n){var r=et(t);return!this.eq_tolerance(r,n)&&this.lt(r)},n.prototype.lte_tolerance=function(t,n){var r=et(t);return this.eq_tolerance(r,n)||this.lt(r)},n.prototype.gt_tolerance=function(t,n){var r=et(t);return!this.eq_tolerance(r,n)&&this.gt(r)},n.prototype.gte_tolerance=function(t,n){var r=et(t);return this.eq_tolerance(r,n)||this.gt(r)},n.prototype.log10=function(){return this.e+Math.log10(this.m)},n.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},n.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},n.prototype.log=function(t){return Math.LN10/Math.log(t)*this.log10()},n.prototype.log2=function(){return 3.321928094887362*this.log10()},n.prototype.ln=function(){return 2.302585092994045*this.log10()},n.prototype.logarithm=function(t){return this.log(t)},n.prototype.pow=function(t){var r,e=t instanceof n?t.toNumber():t,i=this.e*e;if(Number.isSafeInteger(i)&&(r=Math.pow(this.m,e),isFinite(r)&&0!==r))return f(r,i);var o=Math.trunc(i),u=i-o;if(r=Math.pow(10,e*Math.log10(this.m)+u),isFinite(r)&&0!==r)return f(r,o);var a=n.pow10(e*this.absLog10());return-1===this.sign()?1===Math.abs(e%2)?a.neg():0===Math.abs(e%2)?a:pt:a},n.prototype.pow_base=function(t){return et(t).pow(this)},n.prototype.factorial=function(){var t=this.toNumber()+1;return n.pow(t/Math.E*Math.sqrt(t*Math.sinh(1/t)+1/(810*Math.pow(t,6))),t).mul(Math.sqrt(2*Math.PI/t))},n.prototype.exp=function(){var t=this.toNumber();return-706<t&&t<709?n.fromNumber(Math.exp(t)):n.pow(Math.E,t)},n.prototype.sqr=function(){return f(Math.pow(this.m,2),2*this.e)},n.prototype.sqrt=function(){return this.m<0?pt:this.e%2!=0?f(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):f(Math.sqrt(this.m),Math.floor(this.e/2))},n.prototype.cube=function(){return f(Math.pow(this.m,3),3*this.e)},n.prototype.cbrt=function(){var t=1,n=this.m;n<0&&(t=-1,n=-n);var r=t*Math.pow(n,1/3),e=this.e%3;return f(1===e||-1===e?2.154434690031883*r:0!==e?4.641588833612778*r:r,Math.floor(this.e/3))},n.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},n.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},n.prototype.tanh=function(){return this.sinh().div(this.cosh())},n.prototype.asinh=function(){return n.ln(this.add(this.sqr().add(1).sqrt()))},n.prototype.acosh=function(){return n.ln(this.add(this.sqr().sub(1).sqrt()))},n.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:n.ln(this.add(1).div(new n(1).sub(this)))/2},n.prototype.ascensionPenalty=function(t){return 0===t?this:this.pow(Math.pow(10,-t))},n.prototype.egg=function(){return this.add(9)},n.prototype.lessThanOrEqualTo=function(t){if(this.isNaN())return!1;var n=et(t);return!n.isNaN()&&G(this,n)<1},n.prototype.lessThan=function(t){if(this.isNaN())return!1;var n=et(t);return!n.isNaN()&&G(this,n)<0},n.prototype.greaterThanOrEqualTo=function(t){if(this.isNaN())return!1;var n=et(t);return!n.isNaN()&&G(this,n)>-1},n.prototype.greaterThan=function(t){if(this.isNaN())return!1;var n=et(t);return!n.isNaN()&&G(this,n)>0},n.prototype.decimalPlaces=function(){return this.dp()},n.prototype.dp=function(){if(!this.isFinite())return NaN;if(this.exponent>=17)return 0;for(var t=this.mantissa,n=-this.exponent,r=1;Math.abs(Math.round(t*r)/r-t)>1e-10;)r*=10,n++;return n>0?n:0},n.prototype.isZero=function(){return g(this)},n.prototype.isFinite=function(){return isFinite(this.mantissa)},n.prototype.isNaN=function(){return isNaN(this.mantissa)},n.prototype.isPositiveInfinity=function(){return this.mantissa===ht.mantissa},n.prototype.isNegativeInfinity=function(){return this.mantissa===mt.mantissa},Object.defineProperty(n,"NUMBER_MAX_VALUE",{get:function(){return lt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NUMBER_MIN_VALUE",{get:function(){return yt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NaN",{get:function(){return pt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"POSITIVE_INFINITY",{get:function(){return ht},enumerable:!1,configurable:!0}),Object.defineProperty(n,"NEGATIVE_INFINITY",{get:function(){return mt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MAX_VALUE",{get:function(){return ct},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MIN_VALUE",{get:function(){return ft},enumerable:!1,configurable:!0}),Object.defineProperty(n,"ZERO",{get:function(){return gt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"ONE",{get:function(){return bt},enumerable:!1,configurable:!0}),Object.defineProperty(n,"MINUS_ONE",{get:function(){return dt},enumerable:!1,configurable:!0}),n}();function at(t,n){var r=new ut;return r.__set__(t,n),r}function st(t){var n=new ut;return u(n,t),n}var ct=at(1,t),ft=at(1,-t),pt=at(NaN,0),ht=at(Number.POSITIVE_INFINITY,0),mt=at(Number.NEGATIVE_INFINITY,0),lt=st(Number.MAX_VALUE),yt=st(Number.MIN_VALUE),gt=st(0),bt=st(1),dt=st(-1);return ut}));
