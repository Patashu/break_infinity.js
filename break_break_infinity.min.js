//START pad-end ( https://www.npmjs.com/package/pad-end )

var padEnd = function (string, maxLength, fillString) {

  if (string == null || maxLength == null) {
    return string;
  }

  var result    = String(string);

  var length = result.length;
  if (length >= maxLength) {
    return result;
  }

  var filled = fillString == null ? '' : String(fillString);
  if (filled === '') {
    filled = ' ';
  }

  var fillLen = maxLength - length;

  while (filled.length < fillLen) {
    filled += filled;
  }

  var truncated = filled.length > fillLen ? filled.substr(0, fillLen) : filled;

  return result + truncated;
};

//END pad-end

//IE6 shims

Math.log10 = Math.log10 || function(x) {
	return Math.log(x) * Math.LOG10E;
};

Number.isInteger = Number.isInteger || function(value) {
  return typeof value === 'number' && 
    isFinite(value) && 
    Math.floor(value) === value;
};

Number.isSafeInteger = Number.isSafeInteger || function (value) {
   return Number.isInteger(value) && Math.abs(value) <= Number.MAX_SAFE_INTEGER;
};

//TODO: Import big integer instead of just pasting it here
//big integer benchmark: http://yaffle.github.io/BigInteger/benchmark/
//Going with https://github.com/Yaffle/BigInteger as it has incredibly fast create-10, add, mul, div and toString

!function(r){"use strict";function t(r,t,n,e){this.sign=r,this.magnitude=t,this.length=n,this.value=e}function n(){}for(var e=function(r,t,n,e){for(var i=t-1,a=0,u=10>e?e:10;++i<n;){var o=r.charCodeAt(i),f=o-48;if((0>f||f>=u)&&(f=-55+o,(10>f||f>=e)&&(f=-87+o,10>f||f>=e)))throw new RangeError;a=a*e+f}return a},i=function(r){for(var t=new Array(r),n=-1;++n<r;)t[n]=0;return t},a=function(r,t){for(var n=1,e=r,i=t;i>1;){var a=Math.floor(i/2);2*a!==i&&(n*=e),e*=e,i=a}return n*e},u=2/9007199254740992;1+u/2!==1;)u/=2;for(var o=2/u,f=134217728;2/u>f*f;)f*=2;var g=f+1,v=function(r,t,n){var e=g*r,i=e-(e-r),a=r-i,u=g*t,o=u-(u-t),f=t-o,v=i*o+n+i*f+a*o+a*f;return v},d=function(r){var t=r-o+o;return t>r?t-1:t},h=function(r,t,n){var e=t*n,i=v(t,n,-e),a=d(e/o),u=e-a*o+i;return 0>u&&(u+=o,a-=1),u+=r-o,0>u?u+=o:a+=1,{lo:u,hi:a}},l=function(r,t,n){if(r>=n)throw new RangeError;var e=r*o,i=d(e/n),a=0-v(i,n,-e);0>a&&(i-=1,a+=n),a+=t-n,0>a?a+=n:i+=1;var u=d(a/n);return a-=u*n,i+=u,{q:i,r:a}},m=function(r,n,e,i){return new t(r,n,e,i)};t.parseInt=function(r,t){if(void 0==t&&(t=10),10!==t&&(2>t||t>36||t!==Math.floor(t)))throw new RangeError("radix argument must be an integer between 2 and 36");var n=r.length;if(0===n)throw new RangeError;var u=0,f=r.charCodeAt(0),g=0;if(43===f&&(g=1),45===f&&(g=1,u=1),n-=g,0===n)throw new RangeError;if(a(t,n)<=o){var v=e(r,g,g+n,t);return m(0===v?0:u,void 0,0===v?0:1,v)}for(var l=0,c=1,s=d(o/t);s>=c;)l+=1,c*=t;for(var p=Math.floor((n-1)/l)+1,y=i(p),b=p,w=n;w>0;)b-=1,y[b]=e(r,g+(w>l?w-l:0),g+w,t),w-=l;for(var R=-1;++R<p;){for(var E=y[R],A=-1;++A<R;){var I=h(E,y[A],c),M=I.lo,S=I.hi;y[A]=M,E=S}y[R]=E}for(;p>0&&0===y[p-1];)p-=1;return m(0===p?0:u,y,p,y[0])};var c=function(r,t){if(r.length!==t.length)return r.length<t.length?-1:1;for(var n=r.length;--n>=0;)if((void 0==r.magnitude?r.value:r.magnitude[n])!==(void 0==t.magnitude?t.value:t.magnitude[n]))return(void 0==r.magnitude?r.value:r.magnitude[n])<(void 0==t.magnitude?t.value:t.magnitude[n])?-1:1;return 0};t.prototype.compareTo=function(r){var t=this,n=t.sign===r.sign?c(t,r):1;return 1===t.sign?0-n:n},t.prototype.addAndSubtract=function(r,t){var n=this,e=c(n,r),a=0>e?0!==t?1-r.sign:r.sign:n.sign,u=0>e?n:r,f=0>e?r:n;if(0===u.length)return m(a,f.magnitude,f.length,f.value);var g=0,v=f.length;if(n.sign!==(0!==t?1-r.sign:r.sign)){if(g=1,u.length===v)for(;v>0&&(void 0==u.magnitude?u.value:u.magnitude[v-1])===(void 0==f.magnitude?f.value:f.magnitude[v-1]);)v-=1;if(0===v)return m(0,i(0),0,0)}for(var d=i(v+(1-g)),h=-1,l=0;++h<v;){var s=h<u.length?void 0==u.magnitude?u.value:u.magnitude[h]:0;l+=(void 0==f.magnitude?f.value:f.magnitude[h])+(0!==g?0-s:s-o),0>l?(d[h]=o+l,l=0-g):(d[h]=l,l=1-g)}for(0!==l&&(d[v]=l,v+=1);v>0&&0===d[v-1];)v-=1;return m(a,d,v,d[0])},t.prototype.add=function(r){return this.addAndSubtract(r,0)},t.prototype.subtract=function(r){return this.addAndSubtract(r,1)},t.prototype.multiply=function(r){var t=this;if(0===t.length||0===r.length)return m(0,i(0),0,0);var n=1===t.sign?1-r.sign:r.sign;if(1===t.length&&1===(void 0==t.magnitude?t.value:t.magnitude[0]))return m(n,r.magnitude,r.length,r.value);if(1===r.length&&1===(void 0==r.magnitude?r.value:r.magnitude[0]))return m(n,t.magnitude,t.length,t.value);for(var e=t.length+r.length,a=i(e),u=-1;++u<r.length;){for(var f=0,g=-1;++g<t.length;){var v=0;f+=a[g+u]-o,f>=0?v=1:f+=o;var d=h(f,void 0==t.magnitude?t.value:t.magnitude[g],void 0==r.magnitude?r.value:r.magnitude[u]),l=d.lo,c=d.hi;a[g+u]=l,f=c+v}a[t.length+u]=f}for(;e>0&&0===a[e-1];)e-=1;return m(n,a,e,a[0])},t.prototype.divideAndRemainder=function(r,t){var n=this;if(0===r.length)throw new RangeError;if(0===n.length)return m(0,i(0),0,0);var e=1===n.sign?1-r.sign:r.sign;if(1===r.length&&1===(void 0==r.magnitude?r.value:r.magnitude[0]))return 0!==t?m(e,n.magnitude,n.length,n.value):m(0,i(0),0,0);for(var a=n.length+1,u=i(a+r.length+1),f=u,g=u,v=-1;++v<n.length;)g[v]=void 0==n.magnitude?n.value:n.magnitude[v];for(var c=-1;++c<r.length;)f[a+c]=void 0==r.magnitude?r.value:r.magnitude[c];var s=f[a+r.length-1],p=1;if(r.length>1){if(p=d(o/(s+1)),p>1){for(var y=0,b=-1;++b<a+r.length;){var w=h(y,u[b],p),R=w.lo,E=w.hi;u[b]=R,y=E}u[a+r.length]=y,s=f[a+r.length-1]}if(s<d(o/2))throw new RangeError}var A=n.length-r.length+1;0>A&&(A=0);for(var I=void 0,M=0,S=A;--S>=0;){var N=r.length+S,q=o-1;if(g[N]!==s){var T=l(g[N],g[N-1],s),x=T.q;q=x}for(var B=0,C=0,j=S-1;++j<=N;){var k=g[j],z=h(C,q,f[a+j-S]),D=z.lo,F=z.hi;g[j]=D,C=F,B+=k-g[j],0>B?(g[j]=o+B,B=-1):(g[j]=B,B=0)}for(;0!==B;){q-=1;for(var G=0,H=S-1;++H<=N;)G+=g[H]-o+f[a+H-S],0>G?(g[H]=o+G,G=0):(g[H]=G,G=1);B+=G}0!==t&&0!==q&&(0===M&&(M=S+1,I=i(M)),I[S]=q)}if(0!==t)return 0===M?m(0,i(0),0,0):m(e,I,M,I[0]);var J=n.length+1;if(p>1){for(var K=0,L=J;--L>=0;){var O=l(K,g[L],p),P=O.q,Q=O.r;g[L]=P,K=Q}if(0!==K)throw new RangeError}for(;J>0&&0===g[J-1];)J-=1;if(0===J)return m(0,i(0),0,0);for(var U=i(J),V=-1;++V<J;)U[V]=g[V];return m(n.sign,U,J,U[0])},t.prototype.divide=function(r){return this.divideAndRemainder(r,1)},t.prototype.remainder=function(r){return this.divideAndRemainder(r,0)},t.prototype.negate=function(){var r=this;return m(0===r.length?r.sign:1-r.sign,r.magnitude,r.length,r.value)},t.prototype.toString=function(r){if(void 0==r&&(r=10),10!==r&&(2>r||r>36||r!==Math.floor(r)))throw new RangeError("radix argument must be an integer between 2 and 36");var t=this,n=1===t.sign?"-":"",e=t.length;if(0===e)return"0";if(1===e)return n+=(void 0==t.magnitude?t.value:t.magnitude[0]).toString(r);for(var a=0,u=1,f=d(o/r);f>=u;)a+=1,u*=r;if(o>=u*r)throw new RangeError;for(var g=e+Math.floor((e-1)/a)+1,v=i(g),h=-1;++h<e;)v[h]=void 0==t.magnitude?t.value:t.magnitude[h];for(var m=g;0!==e;){for(var c=0,s=e;--s>=0;){var p=l(c,v[s],u),y=p.q,b=p.r;v[s]=y,c=b}for(;e>0&&0===v[e-1];)e-=1;m-=1,v[m]=c}for(n+=v[m].toString(r);++m<g;){for(var w=v[m].toString(r),R=a-w.length;--R>=0;)n+="0";n+=w}return n},t.fromNumber=function(r){return m(0>r?1:0,void 0,0===r?0:1,0>r?0-r:0+r)},t.prototype.toNumber=function(){return 0===this.length?0:1===this.length?1===this.sign?0-this.value:this.value:this};var s=function(r,n){try{}catch(e){}return t.parseInt(r,n)},p=function(r){return"number"==typeof r?t.fromNumber(r):r},y=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return e.compareTo(i)},b=function(r){return r.toNumber()},w=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return b(e.add(i))},R=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return b(e.subtract(i))},E=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return b(e.multiply(i))},A=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return b(e.divide(i))},I=function(r,t){try{}catch(n){}var e=p(r),i=p(t);return b(e.remainder(i))},M=function(r){try{}catch(t){}var n=p(r);return b(n.negate())};n.parseInt=function(r,t){if("string"==typeof r&&"number"==typeof t){var n=0+Number.parseInt(r,t);if(n>=-9007199254740991&&9007199254740991>=n)return n}return s(r,t)},n.compareTo=function(r,t){return"number"==typeof r&&"number"==typeof t?t>r?-1:r>t?1:0:y(r,t)},n.add=function(r,t){if("number"==typeof r&&"number"==typeof t){var n=r+t;if(n>=-9007199254740991&&9007199254740991>=n)return n}return w(r,t)},n.subtract=function(r,t){if("number"==typeof r&&"number"==typeof t){var n=r-t;if(n>=-9007199254740991&&9007199254740991>=n)return n}return R(r,t)},n.multiply=function(r,t){if("number"==typeof r&&"number"==typeof t){var n=0+r*t;if(n>=-9007199254740991&&9007199254740991>=n)return n}return E(r,t)},n.divide=function(r,t){return"number"==typeof r&&"number"==typeof t&&0!==t?0===r?0:r>0&&t>0||0>r&&0>t?0+Math.floor(r/t):0-Math.floor((0-r)/t):A(r,t)},n.remainder=function(r,t){return"number"==typeof r&&"number"==typeof t&&0!==t?0+r%t:I(r,t)},n.negate=function(r){return"number"==typeof r?0-r:M(r)},r.BigInteger=n,r.BigIntegerInternal=t}(this);

//END big integer

//START decimal.js repurposed into ExpHelper ( https://github.com/MikeMcl/decimal.js/ )

!function(n){"use strict";function r(n){var r,t,e,i=n.length-1,o="",s=n[0];if(i>0){for(o+=s,r=1;i>r;r++)e=n[r]+"",t=Z-e.length,t&&(o+=u(t)),o+=e;s=n[r],e=s+"",t=Z-e.length,t&&(o+=u(t))}else if(0===s)return"0";for(;s%10===0;)s/=10;return o+s}function t(n,r,t){if(n!==~~n||r>n||n>t)throw Error(T+n)}function e(n,r,t,e){var i,o,s,u,f,c,h,d,l,a=n.constructor;n:if(null!=r){if(d=n.d,!d)return n;for(i=1,u=d[0];u>=10;u/=10)i++;if(o=r-i,0>o)o+=Z,s=r,h=d[l=0],f=h/C(10,i-s-1)%10|0;else if(l=Math.ceil((o+1)/Z),u=d.length,l>=u){if(!e)break n;for(;u++<=l;)d.push(0);h=f=0,i=1,o%=Z,s=o-Z+1}else{for(h=u=d[l],i=1;u>=10;u/=10)i++;o%=Z,s=o-Z+i,f=0>s?0:h/C(10,i-s-1)%10|0}if(e=e||0>r||void 0!==d[l+1]||(0>s?h:h%C(10,i-s-1)),c=4>t?(f||e)&&(0==t||t==(n.s<0?3:2)):f>5||5==f&&(4==t||e||6==t&&(o>0?s>0?h/C(10,i-s):0:d[l-1])%10&1||t==(n.s<0?8:7)),1>r||!d[0])return d.length=0,c?(r-=n.e+1,d[0]=C(10,(Z-r%Z)%Z),n.e=-r||0):d[0]=n.e=0,n;if(0==o?(d.length=l,u=1,l--):(d.length=l+1,u=C(10,Z-o),d[l]=s>0?(h/C(10,i-s)%C(10,s)|0)*u:0),c)for(;;){if(0==l){for(o=1,s=d[0];s>=10;s/=10)o++;for(s=d[0]+=u,u=1;s>=10;s/=10)u++;o!=u&&(n.e++,d[0]==S&&(d[0]=1));break}if(d[l]+=u,d[l]!=S)break;d[l--]=0,u=1}for(o=d.length;0===d[--o];)d.pop()}return F&&(n.e>a.maxE?(n.d=null,n.e=NaN):n.e<a.minE&&(n.e=0,n.d=[0])),n}function i(n,t,e){if(!n.isFinite())return c(n);var i,o=n.e,s=r(n.d),f=s.length;return t?(e&&(i=e-f)>0?s=s.charAt(0)+"."+s.slice(1)+u(i):f>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):0>o?(s="0."+u(-o-1)+s,e&&(i=e-f)>0&&(s+=u(i))):o>=f?(s+=u(o+1-f),e&&(i=e-o-1)>0&&(s=s+"."+u(i))):((i=o+1)<f&&(s=s.slice(0,i)+"."+s.slice(i)),e&&(i=e-f)>0&&(o+1===f&&(s+="."),s+=u(i))),s}function o(n,r){var t=n[0];for(r*=Z;t>=10;t/=10)r++;return r}function s(n){var r=n.length-1,t=r*Z+1;if(r=n[r]){for(;r%10==0;r/=10)t--;for(r=n[0];r>=10;r/=10)t++}return t}function u(n){for(var r="";n--;)r+="0";return r}function f(n,r,t){for(var e,i=new n(r[0]),o=0;++o<r.length;){if(e=new n(r[o]),!e.s){i=e;break}i[t](e)&&(i=e)}return i}function c(n){return String(n.s*n.s/0)}function h(n,r){var t,e,i;for((t=r.indexOf("."))>-1&&(r=r.replace(".","")),(e=r.search(/e/i))>0?(0>t&&(t=e),t+=+r.slice(e+1),r=r.substring(0,e)):0>t&&(t=r.length),e=0;48===r.charCodeAt(e);e++);for(i=r.length;48===r.charCodeAt(i-1);--i);if(r=r.slice(e,i)){if(i-=e,n.e=t=t-e-1,n.d=[],e=(t+1)%Z,0>t&&(e+=Z),i>e){for(e&&n.d.push(+r.slice(0,e)),i-=Z;i>e;)n.d.push(+r.slice(e,e+=Z));r=r.slice(e),e=Z-r.length}else e-=i;for(;e--;)r+="0";n.d.push(+r),F&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function d(n,r){if("Infinity"===r||"NaN"===r)return+r||(n.s=NaN),n.e=NaN,n.d=null,n;throw Error(T+r)}function l(n){return new this(n).abs()}function a(n,r){return new this(n).plus(r)}function g(n){return e(n=new this(n),n.e+1,2)}function v(n){if(!n||"object"!=typeof n)throw Error(I+"Object expected");var r,t,e,i=["precision",1,U,"rounding",0,8,"toExpNeg",-R,0,"toExpPos",0,R,"maxE",0,R,"minE",-R,0,"modulo",0,9];for(r=0;r<i.length;r+=3)if(void 0!==(e=n[t=i[r]])){if(!(k(e)===e&&e>=i[r+1]&&e<=i[r+2]))throw Error(T+t+": "+e);this[t]=e}if(void 0!==(e=n[t="crypto"])){if(e!==!0&&e!==!1&&0!==e&&1!==e)throw Error(T+t+": "+e);if(e){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(H);this[t]=!0}else this[t]=!1}return this}function p(n){function r(n){var t,e,i,o=this;if(!(o instanceof r))return new r(n);if(o.constructor=r,n instanceof r)return o.s=n.s,o.e=n.e,void(o.d=(n=n.d)?n.slice():n);if(i=typeof n,"number"===i){if(0===n)return o.s=0>1/n?-1:1,o.e=0,void(o.d=[0]);if(0>n?(n=-n,o.s=-1):o.s=1,n===~~n&&1e7>n){for(t=0,e=n;e>=10;e/=10)t++;return o.e=t,void(o.d=[n])}return 0*n!==0?(n||(o.s=NaN),o.e=NaN,void(o.d=null)):h(o,n.toString())}if("string"!==i)throw Error(T+n);return 45===n.charCodeAt(0)?(n=n.slice(1),o.s=-1):o.s=1,M.test(n)?h(o,n):d(o,n)}var t,e,i;if(r.prototype=q,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=v,r.clone=p,r.abs=l,r.add=a,r.ceil=g,r.div=N,r.floor=w,r.max=m,r.min=E,r.mod=x,r.mul=O,r.round=b,r.sign=y,r.sub=D,r.trunc=P,void 0===n&&(n={}),n)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)n.hasOwnProperty(e=i[t++])||(n[e]=this[e]);return r.config(n),r}function N(n,r){return new this(n).div(r)}function w(n){return e(n=new this(n),n.e+1,3)}function m(){return f(this,arguments,"lt")}function E(){return f(this,arguments,"gt")}function x(n,r){return new this(n).mod(r)}function O(n,r){return new this(n).mul(r)}function b(n){return e(n=new this(n),n.e+1,this.rounding)}function y(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function D(n,r){return new this(n).sub(r)}function P(n){return e(n=new this(n),n.e+1,1)}var _,R=9e15,U=1e9,L="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",A={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-R,maxE:R,crypto:!1},F=!0,I="[DecimalError] ",T=I+"Invalid argument: ",H=I+"crypto unavailable",k=Math.floor,C=Math.pow,M=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,S=1e7,Z=7,q=(L.length-1,{});q.absoluteValue=q.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),e(n)},q.ceil=function(){return e(new this.constructor(this),this.e+1,2)},q.comparedTo=q.cmp=function(n){var r,t,e,i,o=this,s=o.d,u=(n=new o.constructor(n)).d,f=o.s,c=n.s;if(!s||!u)return f&&c?f!==c?f:s===u?0:!s^0>f?1:-1:NaN;if(!s[0]||!u[0])return s[0]?f:u[0]?-c:0;if(f!==c)return f;if(o.e!==n.e)return o.e>n.e^0>f?1:-1;for(e=s.length,i=u.length,r=0,t=i>e?e:i;t>r;++r)if(s[r]!==u[r])return s[r]>u[r]^0>f?1:-1;return e===i?0:e>i^0>f?1:-1},q.decimalPlaces=q.dp=function(){var n,r=this.d,t=NaN;if(r){if(n=r.length-1,t=(n-k(this.e/Z))*Z,n=r[n])for(;n%10==0;n/=10)t--;0>t&&(t=0)}return t},q.dividedBy=q.div=function(n){return B(this,new this.constructor(n))},q.dividedToIntegerBy=q.divToInt=function(n){var r=this,t=r.constructor;return e(B(r,new t(n),0,1,1),t.precision,t.rounding)},q.equals=q.eq=function(n){return 0===this.cmp(n)},q.floor=function(){return e(new this.constructor(this),this.e+1,3)},q.greaterThan=q.gt=function(n){return this.cmp(n)>0},q.greaterThanOrEqualTo=q.gte=function(n){var r=this.cmp(n);return 1==r||0===r},q.isFinite=function(){return!!this.d},q.isInteger=q.isInt=function(){return!!this.d&&k(this.e/Z)>this.d.length-2},q.isNaN=function(){return!this.s},q.isNegative=q.isNeg=function(){return this.s<0},q.isPositive=q.isPos=function(){return this.s>0},q.isZero=function(){return!!this.d&&0===this.d[0]},q.lessThan=q.lt=function(n){return this.cmp(n)<0},q.lessThanOrEqualTo=q.lte=function(n){return this.cmp(n)<1},q.minus=q.sub=function(n){var r,t,i,s,u,f,c,h,d,l,a,g,v=this,p=v.constructor;if(n=new p(n),!v.d||!n.d)return v.s&&n.s?v.d?n.s=-n.s:n=new p(n.d||v.s!==n.s?v:NaN):n=new p(NaN),n;if(v.s!=n.s)return n.s=-n.s,v.plus(n);if(d=v.d,g=n.d,c=p.precision,h=p.rounding,!d[0]||!g[0]){if(g[0])n.s=-n.s;else{if(!d[0])return new p(3===h?-0:0);n=new p(v)}return F?e(n,c,h):n}if(t=k(n.e/Z),l=k(v.e/Z),d=d.slice(),u=l-t){for(a=0>u,a?(r=d,u=-u,f=g.length):(r=g,t=l,f=d.length),i=Math.max(Math.ceil(c/Z),f)+2,u>i&&(u=i,r.length=1),r.reverse(),i=u;i--;)r.push(0);r.reverse()}else{for(i=d.length,f=g.length,a=f>i,a&&(f=i),i=0;f>i;i++)if(d[i]!=g[i]){a=d[i]<g[i];break}u=0}for(a&&(r=d,d=g,g=r,n.s=-n.s),f=d.length,i=g.length-f;i>0;--i)d[f++]=0;for(i=g.length;i>u;){if(d[--i]<g[i]){for(s=i;s&&0===d[--s];)d[s]=S-1;--d[s],d[i]+=S}d[i]-=g[i]}for(;0===d[--f];)d.pop();for(;0===d[0];d.shift())--t;return d[0]?(n.d=d,n.e=o(d,t),F?e(n,c,h):n):new p(3===h?-0:0)},q.modulo=q.mod=function(n){var r,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?e(new i(t),i.precision,i.rounding):(F=!1,9==i.modulo?(r=B(t,n.abs(),0,3,1),r.s*=n.s):r=B(t,n,0,i.modulo,1),r=r.times(n),F=!0,t.minus(r))},q.negated=q.neg=function(){var n=new this.constructor(this);return n.s=-n.s,e(n)},q.plus=q.add=function(n){var r,t,i,s,u,f,c,h,d,l,a=this,g=a.constructor;if(n=new g(n),!a.d||!n.d)return a.s&&n.s?a.d||(n=new g(n.d||a.s===n.s?a:NaN)):n=new g(NaN),n;if(a.s!=n.s)return n.s=-n.s,a.minus(n);if(d=a.d,l=n.d,c=g.precision,h=g.rounding,!d[0]||!l[0])return l[0]||(n=new g(a)),F?e(n,c,h):n;if(u=k(a.e/Z),i=k(n.e/Z),d=d.slice(),s=u-i){for(0>s?(t=d,s=-s,f=l.length):(t=l,i=u,f=d.length),u=Math.ceil(c/Z),f=u>f?u+1:f+1,s>f&&(s=f,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(f=d.length,s=l.length,0>f-s&&(s=f,t=l,l=d,d=t),r=0;s;)r=(d[--s]=d[s]+l[s]+r)/S|0,d[s]%=S;for(r&&(d.unshift(r),++i),f=d.length;0==d[--f];)d.pop();return n.d=d,n.e=o(d,i),F?e(n,c,h):n},q.precision=q.sd=function(n){var r,t=this;if(void 0!==n&&n!==!!n&&1!==n&&0!==n)throw Error(T+n);return t.d?(r=s(t.d),n&&t.e+1>r&&(r=t.e+1)):r=NaN,r},q.round=function(){var n=this,r=n.constructor;return e(new r(n),n.e+1,r.rounding)},q.times=q.mul=function(n){var r,t,i,s,u,f,c,h,d,l=this,a=l.constructor,g=l.d,v=(n=new a(n)).d;if(n.s*=l.s,!(g&&g[0]&&v&&v[0]))return new a(!n.s||g&&!g[0]&&!v||v&&!v[0]&&!g?NaN:g&&v?0*n.s:n.s/0);for(t=k(l.e/Z)+k(n.e/Z),h=g.length,d=v.length,d>h&&(u=g,g=v,v=u,f=h,h=d,d=f),u=[],f=h+d,i=f;i--;)u.push(0);for(i=d;--i>=0;){for(r=0,s=h+i;s>i;)c=u[s]+v[i]*g[s-i-1]+r,u[s--]=c%S|0,r=c/S|0;u[s]=(u[s]+r)%S|0}for(;!u[--f];)u.pop();return r?++t:u.shift(),n.d=u,n.e=o(u,t),F?e(n,a.precision,a.rounding):n},q.toDecimalPlaces=q.toDP=function(n,r){var i=this,o=i.constructor;return i=new o(i),void 0===n?i:(t(n,0,U),void 0===r?r=o.rounding:t(r,0,8),e(i,n+i.e+1,r))},q.toExponential=function(n,r){var o,s=this,u=s.constructor;return void 0===n?o=i(s,!0):(t(n,0,U),void 0===r?r=u.rounding:t(r,0,8),s=e(new u(s),n+1,r),o=i(s,!0,n+1)),s.isNeg()&&!s.isZero()?"-"+o:o},q.toFixed=function(n,r){var o,s,u=this,f=u.constructor;return void 0===n?o=i(u):(t(n,0,U),void 0===r?r=f.rounding:t(r,0,8),s=e(new f(u),n+u.e+1,r),o=i(s,!1,n+s.e+1)),u.isNeg()&&!u.isZero()?"-"+o:o},q.toNearest=function(n,r){var i=this,o=i.constructor;if(i=new o(i),null==n){if(!i.d)return i;n=new o(1),r=o.rounding}else{if(n=new o(n),void 0!==r&&t(r,0,8),!i.d)return n.s?i:n;if(!n.d)return n.s&&(n.s=i.s),n}return n.d[0]?(F=!1,4>r&&(r=[4,5,7,8][r]),i=B(i,n,0,r,1).times(n),F=!0,e(i)):(n.s=i.s,i=n),i},q.toNumber=function(){return+this},q.toPrecision=function(n,r){var o,s=this,u=s.constructor;return void 0===n?o=i(s,s.e<=u.toExpNeg||s.e>=u.toExpPos):(t(n,1,U),void 0===r?r=u.rounding:t(r,0,8),s=e(new u(s),n,r),o=i(s,n<=s.e||s.e<=u.toExpNeg,n)),s.isNeg()&&!s.isZero()?"-"+o:o},q.toSignificantDigits=q.toSD=function(n,r){var i=this,o=i.constructor;return void 0===n?(n=o.precision,r=o.rounding):(t(n,1,U),void 0===r?r=o.rounding:t(r,0,8)),e(new o(i),n,r)},q.toString=function(){var n=this,r=n.constructor,t=i(n,n.e<=r.toExpNeg||n.e>=r.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t},q.truncated=q.trunc=function(){return e(new this.constructor(this),this.e+1,1)},q.valueOf=q.toJSON=function(){var n=this,r=n.constructor,t=i(n,n.e<=r.toExpNeg||n.e>=r.toExpPos);return n.isNeg()?"-"+t:t};var B=function(){function n(n,r,t){var e,i=0,o=n.length;for(n=n.slice();o--;)e=n[o]*r+i,n[o]=e%t|0,i=e/t|0;return i&&n.unshift(i),n}function r(n,r,t,e){var i,o;if(t!=e)o=t>e?1:-1;else for(i=o=0;t>i;i++)if(n[i]!=r[i]){o=n[i]>r[i]?1:-1;break}return o}function t(n,r,t,e){for(var i=0;t--;)n[t]-=i,i=n[t]<r[t]?1:0,n[t]=i*e+n[t]-r[t];for(;!n[0]&&n.length>1;)n.shift()}return function(i,o,s,u,f,c){var h,d,l,a,g,v,p,N,w,m,E,x,O,b,y,D,P,R,U,L,A=i.constructor,F=i.s==o.s?1:-1,I=i.d,T=o.d;if(!(I&&I[0]&&T&&T[0]))return new A(i.s&&o.s&&(I?!T||I[0]!=T[0]:T)?I&&0==I[0]||!T?0*F:F/0:NaN);for(c?(g=1,d=i.e-o.e):(c=S,g=Z,d=k(i.e/g)-k(o.e/g)),U=T.length,P=I.length,w=new A(F),m=w.d=[],l=0;T[l]==(I[l]||0);l++);if(T[l]>(I[l]||0)&&d--,null==s?(b=s=A.precision,u=A.rounding):b=f?s+(i.e-o.e)+1:s,0>b)m.push(1),v=!0;else{if(b=b/g+2|0,l=0,1==U){for(a=0,T=T[0],b++;(P>l||a)&&b--;l++)y=a*c+(I[l]||0),m[l]=y/T|0,a=y%T|0;v=a||P>l}else{for(a=c/(T[0]+1)|0,a>1&&(T=n(T,a,c),I=n(I,a,c),U=T.length,P=I.length),D=U,E=I.slice(0,U),x=E.length;U>x;)E[x++]=0;L=T.slice(),L.unshift(0),R=T[0],T[1]>=c/2&&++R;do a=0,h=r(T,E,U,x),0>h?(O=E[0],U!=x&&(O=O*c+(E[1]||0)),a=O/R|0,a>1?(a>=c&&(a=c-1),p=n(T,a,c),N=p.length,x=E.length,h=r(p,E,N,x),1==h&&(a--,t(p,N>U?L:T,N,c))):(0==a&&(h=a=1),p=T.slice()),N=p.length,x>N&&p.unshift(0),t(E,p,x,c),-1==h&&(x=E.length,h=r(T,E,U,x),1>h&&(a++,t(E,x>U?L:T,x,c))),x=E.length):0===h&&(a++,E=[0]),m[l++]=a,h&&E[0]?E[x++]=I[D]||0:(E=[I[D]],x=1);while((D++<P||void 0!==E[0])&&b--);v=void 0!==E[0]}m[0]||m.shift()}if(1==g)w.e=d,_=v;else{for(l=1,a=m[0];a>=10;a/=10)l++;w.e=l+d*g-1,e(w,f?s+w.e+1:s,u,v)}return w}}();A=p(A),A["default"]=A.ExpHelper=A,L=new A(L),A.LN10=L,n.ExpHelper=A}(this);

//END decimal.js repurposed into ExpHelper

"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){for(var t=BigInteger.parseInt("0"),n=BigInteger.parseInt("1"),a=BigInteger.parseInt("-1"),r=BigInteger.parseInt("-7"),i=BigInteger.parseInt("14"),o=BigInteger.parseInt("21"),s=BigInteger.parseInt("308"),u=BigInteger.parseInt("-324"),l=BigInteger.parseInt(padEnd("179769",309,"0")),m=l.negate(),f=BigInteger.parseInt("17"),c=[],h=-323;h<=308;h++)c.push(Number("1e"+h));var p=323,v=function(){function e(t){_classCallCheck(this,e),t instanceof e?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.mantissa=0,this.exponent=0)}return _createClass(e,[{key:"normalize",value:function(){if(0==this.mantissa)return this.mantissa=0,void(this.exponent=t);if(!(this.mantissa>=1&&this.mantissa<10||isNaN(this.mantissa)||isNaN(this.exponent))){var n=Math.floor(Math.log10(Math.abs(this.mantissa)));return this.mantissa=this.mantissa/c[n+p],this.exponent=this.exponent.add(e.toBigInteger(n)),this}}},{key:"fromMantissaExponent",value:function(t,n){return isFinite(t)||(t=Number.NaN,n=l),this.mantissa=t,this.exponent=e.toBigInteger(n),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(t,n){return this.mantissa=t,this.exponent=e.toBigInteger(n),this}},{key:"fromDecimal",value:function(e){return this.mantissa=e.mantissa,this.exponent=e.exponent,this}},{key:"fromNumber",value:function(n){if(isNaN(n))this.mantissa=Number.NaN,this.exponent=l;else if(n==Number.POSITIVE_INFINITY)this.mantissa=1,this.exponent=l;else if(n==Number.NEGATIVE_INFINITY)this.mantissa=-1,this.exponent=l;else if(0==n)this.mantissa=0,this.exponent=t;else{var a=Math.floor(Math.log10(Math.abs(n)));this.exponent=e.toBigInteger(a),this.mantissa=-324==a?10*n/1e-323:n/c[a+p],this.normalize()}return this}},{key:"fromString",value:function(t){if(-1!=t.indexOf("e")){var n=(t=t.replace("(","").replace(")","")).indexOf("e"),a=[t.substring(0,n),t.substring(n+1)];this.mantissa=parseFloat(a[0]),this.exponent=e.toBigInteger(parseFloat(a[1])),this.normalize()}else if("NaN"==t)this.mantissa=Number.NaN,this.exponent=l;else if(this.fromNumber(parseFloat(t)),isNaN(this.mantissa))throw Error("[DecimalError] Invalid argument: "+t);return this}},{key:"fromValue",value:function(t){return t instanceof e?this.fromDecimal(t):"number"==typeof t?this.fromNumber(t):"string"==typeof t?this.fromString(t):(this.mantissa=0,this.exponent=0,this)}}],[{key:"toBigInteger",value:function(n){return n instanceof e?BigInteger.parseInt(n.round().toFixed()):"number"==typeof n?BigInteger.parseInt(new e(n).round().toFixed()):"string"==typeof n?BigInteger.parseInt(n):n instanceof BigIntegerInternal?n:t}}]),_createClass(e,[{key:"toNumber",value:function(){if(!isFinite(this.mantissa))return Number.NaN;if(this.exponent.compareTo(s)>0)return this.mantissa>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.exponent.compareTo(u)<0)return 0;if(0==this.exponent.compareTo(u))return this.mantissa>0?5e-324:-5e-324;var e=this.mantissa*c[parseInt(this.exponent.toString())+p];if(!isFinite(e)||this.exponent.compareTo(t)<0)return e;var n=Math.round(e);return Math.abs(n-e)<1e-10?n:e}},{key:"mantissaWithDecimalPlaces",value:function(e){if(isNaN(this.mantissa))return Number.NaN;if(0==this.mantissa)return 0;var t=e+1,n=Math.ceil(Math.log10(Math.abs(this.mantissa))),a=Math.round(this.mantissa*Math.pow(10,t-n))*Math.pow(10,n-t);return parseFloat(a.toFixed(Math.max(t-n,0)))}},{key:"toString",value:function(){return isNaN(this.mantissa)?"NaN":this.exponent.compareTo(l)>=0?this.mantissa>0?"Infinity":"-Infinity":this.exponent.compareTo(m)<=0||0==this.mantissa?"0":this.exponent.compareTo(o)<0&&this.exponent.compareTo(r)>0?this.toNumber().toString():this.mantissa+"e"+(this.exponent.compareTo(t)>=0?"+":"")+this.exponent.toString()}},{key:"toExponential",value:function(e){if(isNaN(this.mantissa))return"NaN";if(this.exponent.compareTo(l)>=0)return this.mantissa>0?"Infinity":"-Infinity";if(this.exponent.compareTo(m)<=0||0==this.mantissa)return"0"+(e>0?padEnd(".",e+1,"0"):"")+"e+0";if(this.exponent.compareTo(u)>0&&this.exponent.compareTo(s)<0)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var n=e+1,a=Math.max(1,Math.ceil(Math.log10(Math.abs(this.mantissa))));return(Math.round(this.mantissa*Math.pow(10,n-a))*Math.pow(10,a-n)).toFixed(Math.max(n-a,0))+"e"+(this.exponent.compareTo(t)>=0?"+":"")+this.exponent.toString()}},{key:"toFixed",value:function(e){return isNaN(this.mantissa)?"NaN":this.exponent.compareTo(l)>=0?this.mantissa>0?"Infinity":"-Infinity":this.exponent.compareTo(m)<=0||0==this.mantissa?"0"+(e>0?padEnd(".",e+1,"0"):""):this.exponent.compareTo(f)>=0?padEnd(this.mantissa.toString().replace(".",""),this.exponent.add(n).toString(),"0")+(e>0?padEnd(".",e+1,"0"):""):this.toNumber().toFixed(e)}},{key:"toPrecision",value:function(e){return parseFloat(this.exponent.toString())<=-7?this.toExponential(e-1):e>parseFloat(this.exponent.toString())?this.toFixed(e-parseFloat(this.exponent.toString())-1):this.toExponential(e-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(e){return this.toExponential(e)}},{key:"abs",value:function(){return e.fromMantissaExponent(Math.abs(this.mantissa),this.exponent)}},{key:"neg",value:function(){return e.fromMantissaExponent(-this.mantissa,this.exponent)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sign",value:function(){return Math.sign(this.mantissa)}},{key:"sgn",value:function(){return this.sign()}},{key:"round",value:function(){return this.exponent.compareTo(a)<0?new e(0):this.exponent.compareTo(f)<0?new e(Math.round(this.toNumber())):this}},{key:"floor",value:function(){return this.exponent.compareTo(a)<0?Math.sign(this.mantissa)>=0?new e(0):new e(-1):this.exponent.compareTo(f)<0?new e(Math.floor(this.toNumber())):this}},{key:"ceil",value:function(){return this.exponent.compareTo(a)<0?Math.sign(this.mantissa)>0?new e(1):new e(0):this.exponent.compareTo(f)<0?new e(Math.ceil(this.toNumber())):this}},{key:"trunc",value:function(){return this.exponent.compareTo(t)<0?new e(0):this.exponent.compareTo(f)<0?new e(Math.trunc(this.toNumber())):this}},{key:"add",value:function(t){return t=e.fromValue(t),0==this.mantissa?t:0==t.mantissa?this:(this.exponent.compareTo(t.exponent)>=0?(n=this,a=t):(n=t,a=this),n.exponent.subtract(a.exponent).compareTo(f)>0?n:e.fromMantissaExponent(Math.round(1e14*n.mantissa+1e14*a.mantissa*c[parseInt(a.exponent.subtract(n.exponent).toString())+p]),n.exponent.subtract(i)));var n,a}},{key:"plus",value:function(e){return this.add(e)}},{key:"sub",value:function(t){return t=e.fromValue(t),this.add(e.fromMantissaExponent(-t.mantissa,t.exponent))}},{key:"subtract",value:function(e){return this.sub(e)}},{key:"minus",value:function(e){return this.sub(e)}},{key:"mul",value:function(t){return t=e.fromValue(t),e.fromMantissaExponent(this.mantissa*t.mantissa,this.exponent.add(t.exponent))}},{key:"multiply",value:function(e){return this.mul(e)}},{key:"times",value:function(e){return this.mul(e)}},{key:"div",value:function(t){return t=e.fromValue(t),this.mul(t.recip())}},{key:"divide",value:function(e){return this.div(e)}},{key:"divideBy",value:function(e){return this.div(e)}},{key:"dividedBy",value:function(e){return this.div(e)}},{key:"recip",value:function(){return e.fromMantissaExponent(1/this.mantissa,this.exponent.negate())}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"cmp",value:function(t){if(t=e.fromValue(t),0==this.mantissa){if(0==t.mantissa)return 0;if(t.mantissa<0)return 1;if(t.mantissa>0)return-1}else if(0==t.mantissa){if(this.mantissa<0)return-1;if(this.mantissa>0)return 1}return this.mantissa>0?t.mantissa<0?1:this.exponent.compareTo(t.exponent)>0?1:this.exponent.compareTo(t.exponent)<0?-1:this.mantissa>t.mantissa?1:this.mantissa<t.mantissa?-1:0:this.mantissa<0?t.mantissa>0?-1:this.exponent.compareTo(t.exponent)>0?-1:this.exponent.compareTo(t.exponent)<0?1:this.mantissa>t.mantissa?1:this.mantissa<t.mantissa?-1:0:void 0}},{key:"compare",value:function(e){return this.cmp(e)}},{key:"eq",value:function(t){return t=e.fromValue(t),this.mantissa==t.mantissa&&0==this.exponent.compareTo(t.exponent)}},{key:"equals",value:function(e){return this.eq(e)}},{key:"neq",value:function(t){return t=e.fromValue(t),this.mantissa!=t.mantissa||0!=this.exponent.compareTo(t.exponent)}},{key:"notEquals",value:function(e){return this.neq(e)}},{key:"lt",value:function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa>0:0==t.mantissa?this.mantissa<=0:0==this.exponent.compareTo(t.exponent)?this.mantissa<t.mantissa:this.mantissa>0?t.mantissa>0&&this.exponent.compareTo(t.exponent)<0:t.mantissa>0||this.exponent.compareTo(t.exponent)>0}},{key:"lte",value:function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa>=0:0==t.mantissa?this.mantissa<=0:0==this.exponent.compareTo(t.exponent)?this.mantissa<=t.mantissa:this.mantissa>0?t.mantissa>0&&this.exponent.compareTo(t.exponent)<0:t.mantissa>0||this.exponent.compareTo(t.exponent)>0}},{key:"gt",value:function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa<0:0==t.mantissa?this.mantissa>0:0==this.exponent.compareTo(t.exponent)?this.mantissa>t.mantissa:this.mantissa>0?t.mantissa<0||this.exponent.compareTo(t.exponent)>0:t.mantissa<0&&this.exponent.compareTo(t.exponent)<0}},{key:"gte",value:function(t){return t=e.fromValue(t),0==this.mantissa?t.mantissa<=0:0==t.mantissa?this.mantissa>0:0==this.exponent.compareTo(t.exponent)?this.mantissa>=t.mantissa:this.mantissa>0?t.mantissa<0||this.exponent.compareTo(t.exponent)>0:t.mantissa<0&&this.exponent.compareTo(t.exponent)<0}},{key:"max",value:function(t){return t=e.fromValue(t),this.gte(t)?this:t}},{key:"min",value:function(t){return t=e.fromValue(t),this.lte(t)?this:t}},{key:"cmp_tolerance",value:function(t,n){return t=e.fromValue(t),this.eq_tolerance(t,n)?0:this.cmp(t)}},{key:"compare_tolerance",value:function(e,t){return this.cmp_tolerance(e,t)}},{key:"eq_tolerance",value:function(t,n){return t=e.fromValue(t),e.lte(this.sub(t).abs(),e.max(this.abs(),t.abs()).mul(n))}},{key:"equals_tolerance",value:function(e,t){return this.eq_tolerance(e,t)}},{key:"neq_tolerance",value:function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)}},{key:"notEquals_tolerance",value:function(e,t){return this.neq_tolerance(e,t)}},{key:"lt_tolerance",value:function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)&&this.lt(t)}},{key:"lte_tolerance",value:function(t,n){return t=e.fromValue(t),!!this.eq_tolerance(t,n)||this.lt(t)}},{key:"gt_tolerance",value:function(t,n){return t=e.fromValue(t),!this.eq_tolerance(t,n)&&this.gt(t)}},{key:"gte_tolerance",value:function(t,n){return t=e.fromValue(t),!!this.eq_tolerance(t,n)||this.gt(t)}},{key:"abslog10",value:function(){return parseInt(this.exponent.toString())+Math.log10(Math.abs(this.mantissa))}},{key:"log10",value:function(){return parseInt(this.exponent.toString())+Math.log10(this.mantissa)}},{key:"log",value:function(e){return Math.LN10/Math.log(e)*this.log10()}},{key:"log2",value:function(){return 3.321928094887362*this.log10()}},{key:"ln",value:function(){return 2.302585092994046*this.log10()}},{key:"logarithm",value:function(e){return this.log(e)}},{key:"pow",value:function(t){var n=null;if(t instanceof e&&(t=t.toNumber()),t instanceof BigIntegerInternal&&(n=t,t=parseInt(t.toString())),"string"==typeof t&&(-1==t.indexOf(".")&&-1==t.indexOf("e")&&(n=BigInteger.parseInt(t)),t=parseFloat(t)),Number.isInteger(t)){var a=Math.pow(this.mantissa,t);if(isFinite(a))return null!=n?e.fromMantissaExponent(a,this.exponent.multiply(n)):e.fromMantissaExponent(a,this.exponent.multiply(e.toBigInteger(t)))}ExpHelper.precision=17+this.exponent.toString().length;var r=new ExpHelper(t).mul(new ExpHelper(this.exponent.toString())),i=r.trunc(),o=r.sub(i).toNumber();a=Math.pow(10,t*Math.log10(this.mantissa)+o);if(isFinite(a))return e.fromMantissaExponent(a,i.toFixed());var s=e.pow10(t*this.abslog10());return-1==this.sign()&&t%2==1?s.neg():s}},{key:"pow_base",value:function(t){return(t=e.fromValue(t)).pow(this)}},{key:"factorial",value:function(){var t=this.toNumber()+1;return e.pow(t/Math.E*Math.sqrt(t*Math.sinh(1/t)+1/(810*Math.pow(t,6))),t).mul(Math.sqrt(2*Math.PI/t))}},{key:"exp",value:function(){var t,n,a,r=this.toNumber();return isFinite(r)?-706<r&&r<709?e.fromNumber(Math.exp(r)):(ExpHelper.precision=17+parseInt(this.exponent.toString()),t=new ExpHelper(this.toNumber()),n=0,(a=parseInt(this.exponent.toString()))>=0&&(n=t.div(ExpHelper.LN10).trunc(),r=n.mul(ExpHelper.LN10),(t=t.sub(r).toNumber())>=Math.LN10&&(n=n.add(1),t-=Math.LN10)),t<0&&(n=n.sub(1),t+=Math.LN10),t=Math.exp(t),n.eq(0)||(a=e.toBigInteger(n.floor().toFixed()),t=e.fromMantissaExponent(t,a)),t):r}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){return this.pow(.5)}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.pow(1/3)}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return e.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?Number.NaN:e.ln(this.add(1).div(new e(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(e){return 0==e?this:this.pow(Math.pow(10,-e))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(e){return this.cmp(e)<1}},{key:"lessThan",value:function(e){return this.cmp(e)<0}},{key:"greaterThanOrEqualTo",value:function(e){return this.cmp(e)>-1}},{key:"greaterThan",value:function(e){return this.cmp(e)>0}},{key:"m",get:function(){return this.mantissa},set:function(e){this.mantissa=e}},{key:"e",get:function(){return this.exponent},set:function(e){this.exponent=e}}],[{key:"fromMantissaExponent",value:function(t,n){return(new e).fromMantissaExponent(t,n)}},{key:"fromMantissaExponent_noNormalize",value:function(t,n){return(new e).fromMantissaExponent_noNormalize(t,n)}},{key:"fromDecimal",value:function(t){return(new e).fromDecimal(t)}},{key:"fromNumber",value:function(t){return(new e).fromNumber(t)}},{key:"fromString",value:function(t){return(new e).fromString(t)}},{key:"fromValue",value:function(t){return t instanceof e?t:new e(t)}},{key:"abs",value:function(t){return(t=e.fromValue(t)).abs()}},{key:"neg",value:function(t){return(t=e.fromValue(t)).neg()}},{key:"negate",value:function(t){return(t=e.fromValue(t)).neg()}},{key:"negated",value:function(t){return(t=e.fromValue(t)).neg()}},{key:"sign",value:function(t){return(t=e.fromValue(t)).sign()}},{key:"sgn",value:function(t){return(t=e.fromValue(t)).sign()}},{key:"round",value:function(t){return(t=e.fromValue(t)).round()}},{key:"floor",value:function(t){return(t=e.fromValue(t)).floor()}},{key:"ceil",value:function(t){return(t=e.fromValue(t)).ceil()}},{key:"trunc",value:function(t){return(t=e.fromValue(t)).trunc()}},{key:"add",value:function(t,n){return(t=e.fromValue(t)).add(n)}},{key:"plus",value:function(t,n){return(t=e.fromValue(t)).add(n)}},{key:"sub",value:function(t,n){return(t=e.fromValue(t)).sub(n)}},{key:"subtract",value:function(t,n){return(t=e.fromValue(t)).sub(n)}},{key:"minus",value:function(t,n){return(t=e.fromValue(t)).sub(n)}},{key:"mul",value:function(t,n){return(t=e.fromValue(t)).mul(n)}},{key:"multiply",value:function(t,n){return(t=e.fromValue(t)).mul(n)}},{key:"times",value:function(t,n){return(t=e.fromValue(t)).mul(n)}},{key:"div",value:function(t,n){return(t=e.fromValue(t)).div(n)}},{key:"divide",value:function(t,n){return(t=e.fromValue(t)).div(n)}},{key:"recip",value:function(t){return(t=e.fromValue(t)).recip()}},{key:"reciprocal",value:function(t){return(t=e.fromValue(t)).recip()}},{key:"reciprocate",value:function(t){return(t=e.fromValue(t)).reciprocate()}},{key:"cmp",value:function(t,n){return(t=e.fromValue(t)).cmp(n)}},{key:"compare",value:function(t,n){return(t=e.fromValue(t)).cmp(n)}},{key:"eq",value:function(t,n){return(t=e.fromValue(t)).eq(n)}},{key:"equals",value:function(t,n){return(t=e.fromValue(t)).eq(n)}},{key:"neq",value:function(t,n){return(t=e.fromValue(t)).neq(n)}},{key:"notEquals",value:function(t,n){return(t=e.fromValue(t)).notEquals(n)}},{key:"lt",value:function(t,n){return(t=e.fromValue(t)).lt(n)}},{key:"lte",value:function(t,n){return(t=e.fromValue(t)).lte(n)}},{key:"gt",value:function(t,n){return(t=e.fromValue(t)).gt(n)}},{key:"gte",value:function(t,n){return(t=e.fromValue(t)).gte(n)}},{key:"max",value:function(t,n){return(t=e.fromValue(t)).max(n)}},{key:"min",value:function(t,n){return(t=e.fromValue(t)).min(n)}},{key:"cmp_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).cmp_tolerance(n,a)}},{key:"compare_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).cmp_tolerance(n,a)}},{key:"eq_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).eq_tolerance(n,a)}},{key:"equals_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).eq_tolerance(n,a)}},{key:"neq_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).neq_tolerance(n,a)}},{key:"notEquals_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).notEquals_tolerance(n,a)}},{key:"lt_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).lt_tolerance(n,a)}},{key:"lte_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).lte_tolerance(n,a)}},{key:"gt_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).gt_tolerance(n,a)}},{key:"gte_tolerance",value:function(t,n,a){return(t=e.fromValue(t)).gte_tolerance(n,a)}},{key:"log10",value:function(t){return(t=e.fromValue(t)).log10()}},{key:"log",value:function(t,n){return(t=e.fromValue(t)).log(n)}},{key:"log2",value:function(t){return(t=e.fromValue(t)).log2()}},{key:"ln",value:function(t){return(t=e.fromValue(t)).ln()}},{key:"logarithm",value:function(t,n){return(t=e.fromValue(t)).logarithm(n)}},{key:"pow10",value:function(t){return Number.isInteger(t)?e.fromMantissaExponent_noNormalize(1,t):e.fromMantissaExponent(Math.pow(10,t%1),Math.trunc(t))}},{key:"pow",value:function(t,n){return 10===t&&Number.isInteger(n)?e.fromMantissaExponent(1,n):(t=e.fromValue(t)).pow(n)}},{key:"exp",value:function(t){return(t=e.fromValue(t)).exp()}},{key:"sqr",value:function(t){return(t=e.fromValue(t)).sqr()}},{key:"sqrt",value:function(t){return(t=e.fromValue(t)).sqrt()}},{key:"cube",value:function(t){return(t=e.fromValue(t)).cube()}},{key:"cbrt",value:function(t){return(t=e.fromValue(t)).cbrt()}},{key:"affordGeometricSeries",value:function(t,n,a,r){t=e.fromValue(t),n=e.fromValue(n),a=e.fromValue(a);var i=n.mul(e.pow(a,r));return e.floor(e.log10(t.div(i).mul(a.sub(1)).add(1))/e.log10(a))}},{key:"sumGeometricSeries",value:function(t,n,a,r){return n=e.fromValue(n),a=e.fromValue(a),n.mul(e.pow(a,r)).mul(e.sub(1,e.pow(a,t))).div(e.sub(1,a))}},{key:"affordArithmeticSeries",value:function(t,n,a,r){t=e.fromValue(t),n=e.fromValue(n),a=e.fromValue(a),r=e.fromValue(r);var i=n.add(e.mul(r,a)).sub(a.div(2)),o=i.pow(2);return e.floor(i.neg().add(e.sqrt(o.add(e.mul(a,t).mul(2)))).div(a))}},{key:"sumArithmeticSeries",value:function(t,n,a,r){t=e.fromValue(t),n=e.fromValue(n),a=e.fromValue(a),r=e.fromValue(r);var i=n.add(e.mul(r,a));return e.div(t,2).mul(e.mul(2,i).plus(t.sub(1).mul(a)))}},{key:"efficiencyOfPurchase",value:function(t,n,a){return t=e.fromValue(t),n=e.fromValue(n),a=e.fromValue(a),e.add(t.div(n),t.div(a))}},{key:"randomDecimalForTesting",value:function(t){if(20*Math.random()<1)return e.fromMantissaExponent(0,0);var n=10*Math.random();10*Math.random()<1&&(n=Math.round(n)),n*=Math.sign(2*Math.random()-1);var a=Math.floor(Math.random()*t*2)-t;return e.fromMantissaExponent(n,a)}}]),e}();if("function"==typeof define&&define.amd)define(function(){return v});else if("undefined"!=typeof module&&module.exports)module.exports=v;else{e||(e="undefined"!=typeof self&&self&&self.self==self?self:Function("return this")());var y=e.Decimal;v.noConflict=function(){return e.Decimal=y,v},e.Decimal=v}}(void 0);